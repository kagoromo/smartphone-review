<% provide :title, t(:edit_profile) %>
<h1><%= t :edit_profile %></h1>
<div class="content">
  <div class="row">
    <div class="col-md-offset-3 col-md-6">
      <%= form_for resource, as: resource_name, url: registration_path(resource_name), html:{method: :put} do |f| %>
        <%= devise_error_messages! %>

        <%= f.label :email %><br/>
        <%= f.email_field :email, autofocus: true, class: "form-control" %>

        <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
          <div><%= t :waiting, content: resource.unconfirmed_email %></div>
        <% end %>

        <%= f.label :password %><i><%= t :rule %></i><br/>
        <%= f.password_field :password, autocomplete: "off", class: "form-control" %>

        <%= f.label :password_confirmation %><br/>
        <%= f.password_field :password_confirmation, autocomplete: "off", class: "form-control" %>

        <% if f.object.encrypted_password.present? %>
          <%= f.label :current_password %>
          <i><%= t :current_password %></i><br/>
          <%= f.password_field :current_password, autocomplete: "off",
            class: "form-control" %>
        <% end %>

        <% if f.object.provider.blank? %>
          <a href="auth/facebook" class="auth_provider">
            <%= image_tag "authbuttons/facebook_64.png", size: "64x64",
            alt: "Link a Facebook account" %>Link a Facebook account</a>
        <% else %>
          <%= link_to unlink_facebook_path(@user), method: :post do %>
            <%= image_tag "authbuttons/facebook_64.png", size: "64x64",
              alt: "Unlink your Facebook account" %>Unlink your Facebook account
          <% end %>
        <% end %>
        <div class="actions">
          <br>
          <%= f.submit "Update", class: "btn btn-primary" %>
        </div>
      <% end %>
      <br>
      <div class="center">
        <%= link_to t(:back), :back, class: "btn btn-default col-md-4 pull-left" %>
      </div>
    </div>
  </div>
</div>

